<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="/home/faysal/Desktop/nvd3-community-nvd3-c41d501/build/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="/home/faysal/Desktop/nvd3-community-nvd3-c41d501/build/nv.d3.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, #test1, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body>

<div id="test1" class='with-3d-shadow with-transitions'>
    <svg></svg>
</div>

<script>

var datax=[{"Name":"AMS","AMEAN":-0.0158,"GMEAN":-0.0279,"PERFORMANCE":28.1418,"_row":"AMS"},{"Name":"ASE","AMEAN":-0.0116,"GMEAN":-0.0128,"PERFORMANCE":27.4248,"_row":"ASE"},{"Name":"ASX","AMEAN":-0.0048,"GMEAN":-0.0087,"PERFORMANCE":29.3353,"_row":"ASX"},{"Name":"ATH","AMEAN":-0.026,"GMEAN":-0.0011,"PERFORMANCE":26.0314,"_row":"ATH"},{"Name":"BER","AMEAN":-0.0094,"GMEAN":-0.0143,"PERFORMANCE":27.1779,"_row":"BER"},{"Name":"BRU","AMEAN":-0.0014,"GMEAN":-0.0042,"PERFORMANCE":30.8536,"_row":"BRU"},{"Name":"BSE","AMEAN":-0.0025,"GMEAN":0.0008,"PERFORMANCE":27.265,"_row":"BSE"},{"Name":"BUE","AMEAN":0.0458,"GMEAN":-0.0022,"PERFORMANCE":44.9118,"_row":"BUE"},{"Name":"CPH","AMEAN":-0.0162,"GMEAN":-0.0119,"PERFORMANCE":25.4332,"_row":"CPH"},{"Name":"DOH","AMEAN":-0.0336,"GMEAN":-0.036,"PERFORMANCE":25.7113,"_row":"DOH"},{"Name":"DUS","AMEAN":-0.0137,"GMEAN":-0.0024,"PERFORMANCE":25.7551,"_row":"DUS"},{"Name":"EBS","AMEAN":-0.0174,"GMEAN":-0.0041,"PERFORMANCE":28.2958,"_row":"EBS"},{"Name":"FRA","AMEAN":-0.0123,"GMEAN":-0.0201,"PERFORMANCE":26.9128,"_row":"FRA"},{"Name":"GER","AMEAN":-0.0136,"GMEAN":-0.0145,"PERFORMANCE":27.1787,"_row":"GER"},{"Name":"HAM","AMEAN":-0.0113,"GMEAN":-0.0044,"PERFORMANCE":26.8995,"_row":"HAM"},{"Name":"HAN","AMEAN":-0.0106,"GMEAN":-0.0142,"PERFORMANCE":28.1113,"_row":"HAN"},{"Name":"HEL","AMEAN":-0.0057,"GMEAN":-0.005,"PERFORMANCE":30.2596,"_row":"HEL"},{"Name":"HKG","AMEAN":-0.0193,"GMEAN":-0.0238,"PERFORMANCE":26.9061,"_row":"HKG"},{"Name":"IOB","AMEAN":-0.0226,"GMEAN":-0.0283,"PERFORMANCE":28.9203,"_row":"IOB"},{"Name":"IST","AMEAN":-0.0154,"GMEAN":-0.0128,"PERFORMANCE":32.9095,"_row":"IST"},{"Name":"JKT","AMEAN":0.0038,"GMEAN":-0.0016,"PERFORMANCE":33.4073,"_row":"JKT"},{"Name":"KLS","AMEAN":-0.0026,"GMEAN":-0.0103,"PERFORMANCE":30.369,"_row":"KLS"},{"Name":"KSC","AMEAN":-0.0177,"GMEAN":-0.0118,"PERFORMANCE":25.2266,"_row":"KSC"},{"Name":"LSE","AMEAN":-0.0084,"GMEAN":-0.0182,"PERFORMANCE":28.1361,"_row":"LSE"},{"Name":"MCE","AMEAN":-0.021,"GMEAN":-0.028,"PERFORMANCE":27.6144,"_row":"MCE"},{"Name":"MCX","AMEAN":-0.0052,"GMEAN":0.0046,"PERFORMANCE":27.6012,"_row":"MCX"},{"Name":"MEX","AMEAN":0.0037,"GMEAN":-0.0003,"PERFORMANCE":31.6885,"_row":"MEX"},{"Name":"MIL","AMEAN":-0.0211,"GMEAN":-0.0323,"PERFORMANCE":24.1922,"_row":"MIL"},{"Name":"MUN","AMEAN":-0.0126,"GMEAN":-0.0124,"PERFORMANCE":27.08,"_row":"MUN"},{"Name":"NCM","AMEAN":-0.0129,"GMEAN":-0.0237,"PERFORMANCE":26.2019,"_row":"NCM"},{"Name":"NGM","AMEAN":-0.0159,"GMEAN":-0.0215,"PERFORMANCE":24.189,"_row":"NGM"},{"Name":"NMS","AMEAN":-0.0105,"GMEAN":-0.0166,"PERFORMANCE":28.3133,"_row":"NMS"},{"Name":"NSI","AMEAN":-0.0011,"GMEAN":-0.002,"PERFORMANCE":28.219,"_row":"NSI"},{"Name":"NYQ","AMEAN":-0.0029,"GMEAN":-0.0157,"PERFORMANCE":33.2513,"_row":"NYQ"},{"Name":"NZE","AMEAN":0.0031,"GMEAN":0.003,"PERFORMANCE":34.6303,"_row":"NZE"},{"Name":"OBB","AMEAN":-0.0069,"GMEAN":-0.0507,"PERFORMANCE":28.1192,"_row":"OBB"},{"Name":"OSL","AMEAN":-0.0076,"GMEAN":-0.0058,"PERFORMANCE":30.8315,"_row":"OSL"},{"Name":"PAR","AMEAN":-0.0014,"GMEAN":-0.0133,"PERFORMANCE":31.5499,"_row":"PAR"},{"Name":"PCX","AMEAN":-0.0143,"GMEAN":-0.0212,"PERFORMANCE":30.1733,"_row":"PCX"},{"Name":"PNK","AMEAN":0.0004,"GMEAN":-0.0208,"PERFORMANCE":32.2226,"_row":"PNK"},{"Name":"SAO","AMEAN":0.0418,"GMEAN":-0.0042,"PERFORMANCE":59.1003,"_row":"SAO"},{"Name":"SES","AMEAN":-0.0022,"GMEAN":-0.0133,"PERFORMANCE":30.8825,"_row":"SES"},{"Name":"SET","AMEAN":-0.0077,"GMEAN":-0.0205,"PERFORMANCE":29.822,"_row":"SET"},{"Name":"STO","AMEAN":-0.0133,"GMEAN":-0.0121,"PERFORMANCE":26.0114,"_row":"STO"},{"Name":"STU","AMEAN":-0.0175,"GMEAN":-0.0254,"PERFORMANCE":26.6221,"_row":"STU"},{"Name":"TAI","AMEAN":-0.0146,"GMEAN":-0.0078,"PERFORMANCE":29.0859,"_row":"TAI"},{"Name":"TLV","AMEAN":-0.0055,"GMEAN":-0.005,"PERFORMANCE":29.0171,"_row":"TLV"},{"Name":"TOR","AMEAN":-0.0059,"GMEAN":-0.0084,"PERFORMANCE":30.3177,"_row":"TOR"},{"Name":"TWO","AMEAN":0.0006,"GMEAN":-0.0002,"PERFORMANCE":32.9734,"_row":"TWO"},{"Name":"VAN","AMEAN":-0.0037,"GMEAN":-0.0017,"PERFORMANCE":32.6907,"_row":"VAN"},{"Name":"VIE","AMEAN":-0.0063,"GMEAN":-0.0132,"PERFORMANCE":29.0071,"_row":"VIE"},{"Name":"VTX","AMEAN":-0.0028,"GMEAN":-0.009,"PERFORMANCE":29.922,"_row":"VTX"}];

    // register our custom symbols to nvd3
    // make sure your path is valid given any size because size scales if the chart scales.
    nv.utils.symbolMap.set('thin-x', function(size) {
        size = Math.sqrt(size);
        return 'M' + (-size/2) + ',' + (-size/2) +'l' + size + ',' + size +'m0,' + -(size) +'l' + (-size) + ',' + size;
    });

    // create the chart
    var chart;
    nv.addGraph(function() {
        chart = nv.models.scatterChart()
            .showDistX(true)
            .showDistY(true)
            .useVoronoi(true)
            .color(d3.scale.category10().range())
            .duration(300)
            .showLegend(false)
        ;

var max_of_arrayA     = Math.max.apply(Math,datax.map(function(d){return d.AMEAN;}));
var min_of_arrayA     = Math.min.apply(Math,datax.map(function(d){return d.AMEAN;}));
var max_of_arrayG     = Math.max.apply(Math,datax.map(function(d){return d.GMEAN;}));
var min_of_arrayG     = Math.min.apply(Math,datax.map(function(d){return d.GMEAN;}));
var max_of_arrayP     = Math.max.apply(Math,datax.map(function(d){return d.PERFORMANCE;}));
var min_of_arrayP     = Math.min.apply(Math,datax.map(function(d){return d.PERFORMANCE;}));

        chart.yAxis
    .axisLabel('Performance');
    chart.xAxis
    .axisLabel('Arth_Mean');
    
       chart.dispatch.on('renderEnd', function(){
           console.log('render complete');
        });

        chart.xAxis.tickFormat(d3.format('.02f'));
        chart.yAxis.tickFormat(d3.format('.02f'));
       chart.tooltipContent(function(key) {
       return '<h2>' + key + '</h2>';
       });

        d3.select('#test1 svg')
            .datum(randomData(datax.length))
            .call(chart);

        nv.utils.windowResize(chart.update);

        chart.dispatch.on('stateChange', function(e) { ('New State:', JSON.stringify(e)); });
        return chart;
    });

    function randomData(points) { //# groups,# points per group
        // smiley and thin-x are our custom symbols!
        var data = [];
        var shapes = ['square'];
        var     random = d3.random.normal();

        for (i = 0; i < points; i++) {
            data.push({key:datax[i].Name + " % "  + Math.round(datax[i].GMEAN * 1000) ,values: []});
            data[i].values.push({x: datax[i].AMEAN,y: datax[i].PERFORMANCE,size: 10*datax[i].PERFORMANCE,shape: shapes[0 % shapes.length]});
        }

        return data;
    }



</script>
</body>
</html>
