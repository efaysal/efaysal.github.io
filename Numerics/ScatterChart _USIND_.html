<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="../build/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="../build/nv.d3.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, #test1, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body>

<div id="test1" class='with-3d-shadow with-transitions'>
    <svg></svg>
</div>

<script>

var datax=[{"Name":"Advertising","Mmean":-0.005843523319,"Hmean":-0.005843523319,"MPmean":123.258810588235,"HPmean":123.258810588235,"STOCKN":28},{"Name":"Aerospace","Mmean":-0.018864645,"Hmean":-0.018864645,"MPmean":107.130914117647,"HPmean":107.130914117647,"STOCKN":15},{"Name":"Agricultural_Chemicals","Mmean":-0.01529962776,"Hmean":-0.01529962776,"MPmean":102.101465882353,"HPmean":102.101465882353,"STOCKN":16},{"Name":"Air_Freight/Delivery_Services","Mmean":-0.01141762712,"Hmean":-0.01141762712,"MPmean":125.021601176471,"HPmean":125.021601176471,"STOCKN":22},{"Name":"Apparel","Mmean":-0.01349990237,"Hmean":-0.01349990237,"MPmean":117.431645882353,"HPmean":117.431645882353,"STOCKN":34},{"Name":"Auto_Manufacturing","Mmean":-0.0275931922,"Hmean":-0.0275931922,"MPmean":104.536824705882,"HPmean":104.536824705882,"STOCKN":17},{"Name":"Automotive_Aftermarket","Mmean":-0.03149715859,"Hmean":-0.03149715859,"MPmean":79.2911329411765,"HPmean":79.2911329411765,"STOCKN":24},{"Name":"Auto_Parts:O.E.M.","Mmean":-0.02826844158,"Hmean":-0.02826844158,"MPmean":97.3575105882353,"HPmean":97.3575105882353,"STOCKN":38},{"Name":"Banks","Mmean":-0.00368692715,"Hmean":-0.00368692715,"MPmean":106.503643529412,"HPmean":106.503643529412,"STOCKN":25},{"Name":"Biotechnology:_Commercial_Physical_&_Biological_Resarch","Mmean":-0.01860789715,"Hmean":-0.01860789715,"MPmean":97.4769211764706,"HPmean":97.4769211764706,"STOCKN":24},{"Name":"Biotechnology:_Electromedical_&_Electrotherapeutic_Apparatus","Mmean":-0.0160744697,"Hmean":-0.0160744697,"MPmean":100.427241176471,"HPmean":100.427241176471,"STOCKN":36},{"Name":"Biotechnology:_In_Vitro_&_In_Vivo_Diagnostic_Substances","Mmean":-0.0178951220118,"Hmean":-0.0178951220118,"MPmean":96.4507611764706,"HPmean":96.4507611764706,"STOCKN":21},{"Name":"Biotechnology:_Laboratory_Analytical_Instruments","Mmean":-0.0054125425,"Hmean":-0.0054125425,"MPmean":123.2463,"HPmean":123.2463,"STOCKN":21},{"Name":"Broadcasting","Mmean":-0.02662196286,"Hmean":-0.02662196286,"MPmean":93.4769058823529,"HPmean":93.4769058823529,"STOCKN":29},{"Name":"Building_Materials","Mmean":-0.0225563618,"Hmean":-0.0225563618,"MPmean":119.585583529412,"HPmean":119.585583529412,"STOCKN":14},{"Name":"Building_Products","Mmean":-0.0087177145,"Hmean":-0.0087177145,"MPmean":116.707035294118,"HPmean":116.707035294118,"STOCKN":12},{"Name":"Business_Services","Mmean":-0.016975931,"Hmean":-0.016975931,"MPmean":100.151117647059,"HPmean":100.151117647059,"STOCKN":132},{"Name":"Catalog/Specialty_Distribution","Mmean":-0.0194806912,"Hmean":-0.0194806912,"MPmean":105.435608235294,"HPmean":105.435608235294,"STOCKN":18},{"Name":"Clothing/Shoe/Accessory_Stores","Mmean":0.002574542606,"Hmean":0.002574542606,"MPmean":130.593063529412,"HPmean":130.593063529412,"STOCKN":39},{"Name":"Coal_Mining","Mmean":-0.061669106182,"Hmean":-0.061669106182,"MPmean":105.471163882353,"HPmean":105.471163882353,"STOCKN":13},{"Name":"Commercial_Banks","Mmean":-0.00841735735,"Hmean":-0.00841735735,"MPmean":113.129447058824,"HPmean":113.129447058824,"STOCKN":46},{"Name":"Computer_Communications_Equipment","Mmean":-0.01742863109,"Hmean":-0.01742863109,"MPmean":103.715332941176,"HPmean":103.715332941176,"STOCKN":18},{"Name":"Computer_Manufacturing","Mmean":-0.01638503489,"Hmean":-0.01638503489,"MPmean":114.587138823529,"HPmean":114.587138823529,"STOCKN":14},{"Name":"Computer_peripheral_equipment","Mmean":-0.03261890632,"Hmean":-0.03261890632,"MPmean":91.3035435294118,"HPmean":91.3035435294118,"STOCKN":18},{"Name":"Computer_Software:_Prepackaged_Software","Mmean":-0.0244498643,"Hmean":-0.0244498643,"MPmean":100.566088235294,"HPmean":100.566088235294,"STOCKN":140},{"Name":"Computer_Software:_Programming__Data_Processing","Mmean":-0.01774535417,"Hmean":-0.01774535417,"MPmean":100.594927058824,"HPmean":100.594927058824,"STOCKN":40},{"Name":"Construction/Ag_Equipment/Trucks","Mmean":-0.0132453884,"Hmean":-0.0132453884,"MPmean":120.783189411765,"HPmean":120.783189411765,"STOCKN":13},{"Name":"Consumer_Electronics/Appliances","Mmean":-0.01553632543,"Hmean":-0.01553632543,"MPmean":128.24406,"HPmean":128.24406,"STOCKN":16},{"Name":"Consumer_Specialties","Mmean":-0.02425230983,"Hmean":-0.02425230983,"MPmean":98.1185717647059,"HPmean":98.1185717647059,"STOCKN":13},{"Name":"Containers/Packaging","Mmean":-0.0121229569,"Hmean":-0.0121229569,"MPmean":117.250783529412,"HPmean":117.250783529412,"STOCKN":21},{"Name":"Department/Specialty_Retail_Stores","Mmean":-0.0043940645577,"Hmean":-0.0043940645577,"MPmean":123.116610588235,"HPmean":123.116610588235,"STOCKN":22},{"Name":"Diversified_Commercial_Services","Mmean":-0.0285340529,"Hmean":-0.0285340529,"MPmean":97.1547047058824,"HPmean":97.1547047058824,"STOCKN":31},{"Name":"EDP_Services","Mmean":-0.02100812121,"Hmean":-0.02100812121,"MPmean":98.5255376470588,"HPmean":98.5255376470588,"STOCKN":130},{"Name":"Electrical_Products","Mmean":-0.0136389012,"Hmean":-0.0136389012,"MPmean":114.655418823529,"HPmean":114.655418823529,"STOCKN":54},{"Name":"Electric_Utilities:_Central","Mmean":0.009400589979,"Hmean":0.009400589979,"MPmean":137.599488235294,"HPmean":137.599488235294,"STOCKN":79},{"Name":"Electronic_Components","Mmean":-0.01669786928,"Hmean":-0.01669786928,"MPmean":100.162242352941,"HPmean":100.162242352941,"STOCKN":32},{"Name":"Engineering_&_Construction","Mmean":-0.0136008356,"Hmean":-0.0136008356,"MPmean":108.703555294118,"HPmean":108.703555294118,"STOCKN":14},{"Name":"Environmental_Services","Mmean":-0.0005692555,"Hmean":-0.0005692555,"MPmean":132.804675294118,"HPmean":132.804675294118,"STOCKN":13},{"Name":"Farming/Seeds/Milling","Mmean":-0.01083880804,"Hmean":-0.01083880804,"MPmean":113.742905882353,"HPmean":113.742905882353,"STOCKN":28},{"Name":"Finance:_Consumer_Services","Mmean":-0.0169021149,"Hmean":-0.0169021149,"MPmean":96.3150658823529,"HPmean":96.3150658823529,"STOCKN":75},{"Name":"Food_Chains","Mmean":-0.00968815096,"Hmean":-0.00968815096,"MPmean":109.046914117647,"HPmean":109.046914117647,"STOCKN":18},{"Name":"Food_Distributors","Mmean":-0.0025428435,"Hmean":-0.0025428435,"MPmean":128.908663529412,"HPmean":128.908663529412,"STOCKN":13},{"Name":"Forest_Products","Mmean":-0.01697837217,"Hmean":-0.01697837217,"MPmean":121.267844705882,"HPmean":121.267844705882,"STOCKN":11},{"Name":"GLOBALHFs","Mmean":-0.01760063463,"Hmean":-0.01760063463,"MPmean":102.202203529412,"HPmean":102.202203529412,"STOCKN":4866},{"Name":"Homebuilding","Mmean":-0.01292741381,"Hmean":-0.01292741381,"MPmean":119.013198823529,"HPmean":119.013198823529,"STOCKN":35},{"Name":"Home_Furnishings","Mmean":-0.0246373522,"Hmean":-0.0246373522,"MPmean":101.611044705882,"HPmean":101.611044705882,"STOCKN":26},{"Name":"Hospital/Nursing_Management","Mmean":-0.02059619369,"Hmean":-0.02059619369,"MPmean":106.357282352941,"HPmean":106.357282352941,"STOCKN":32},{"Name":"Hotels/Resorts","Mmean":-0.01356609443,"Hmean":-0.01356609443,"MPmean":123.639101176471,"HPmean":123.639101176471,"STOCKN":36},{"Name":"Industrial_Machinery/Components","Mmean":-0.015113452,"Hmean":-0.015113452,"MPmean":110.703707058824,"HPmean":110.703707058824,"STOCKN":168},{"Name":"Industrial_Specialties","Mmean":-0.01643233582,"Hmean":-0.01643233582,"MPmean":119.466276470588,"HPmean":119.466276470588,"STOCKN":48},{"Name":"Integrated_oil_Companies","Mmean":-0.045945480898,"Hmean":-0.045945480898,"MPmean":78.8627129411765,"HPmean":78.8627129411765,"STOCKN":28},{"Name":"Investment_Bankers/Brokers/Service","Mmean":-0.02851310071,"Hmean":-0.02851310071,"MPmean":94.0864247058824,"HPmean":94.0864247058824,"STOCKN":69},{"Name":"Investment_Managers","Mmean":-0.03502921029,"Hmean":-0.03502921029,"MPmean":81.5717752941176,"HPmean":81.5717752941176,"STOCKN":41},{"Name":"Life_Insurance","Mmean":-0.02315192685,"Hmean":-0.02315192685,"MPmean":87.4831694117647,"HPmean":87.4831694117647,"STOCKN":36},{"Name":"Major_Banks","Mmean":-0.01843130463,"Hmean":-0.01843130463,"MPmean":92.3622141176471,"HPmean":92.3622141176471,"STOCKN":352},{"Name":"Major_Chemicals","Mmean":-0.02201697831,"Hmean":-0.02201697831,"MPmean":107.351011764706,"HPmean":107.351011764706,"STOCKN":69},{"Name":"Major_Pharmaceuticals","Mmean":-0.04030326578,"Hmean":-0.04030326578,"MPmean":75.2592548235294,"HPmean":75.2592548235294,"STOCKN":369},{"Name":"Marine_Transportation","Mmean":-0.03234434658,"Hmean":-0.03234434658,"MPmean":98.3830917647059,"HPmean":98.3830917647059,"STOCKN":75},{"Name":"Medical/Dental_Instruments","Mmean":-0.0102225982,"Hmean":-0.0102225982,"MPmean":113.675441176471,"HPmean":113.675441176471,"STOCKN":95},{"Name":"Medical/Nursing_Services","Mmean":-0.01738464336,"Hmean":-0.01738464336,"MPmean":97.7603329411765,"HPmean":97.7603329411765,"STOCKN":23},{"Name":"Medical_Specialities","Mmean":0.00030313896,"Hmean":0.00030313896,"MPmean":124.677602352941,"HPmean":124.677602352941,"STOCKN":39},{"Name":"Metal_Fabrications","Mmean":-0.02211958495,"Hmean":-0.02211958495,"MPmean":114.740592941176,"HPmean":114.740592941176,"STOCKN":62},{"Name":"Military/Government/Technical","Mmean":-0.0127932326,"Hmean":-0.0127932326,"MPmean":112.906895294118,"HPmean":112.906895294118,"STOCKN":37},{"Name":"Miscellaneous","Mmean":-0.011522268731,"Hmean":-0.011522268731,"MPmean":125.990862352941,"HPmean":125.990862352941,"STOCKN":4},{"Name":"Miscellaneous_manufacturing_industries","Mmean":0.0002462766,"Hmean":0.0002462766,"MPmean":117.807570588235,"HPmean":117.807570588235,"STOCKN":7},{"Name":"Movies/Entertainment","Mmean":-0.01590801009,"Hmean":-0.01590801009,"MPmean":107.520518823529,"HPmean":107.520518823529,"STOCKN":13},{"Name":"Multi-Sector_Companies","Mmean":-0.00759406609,"Hmean":-0.00759406609,"MPmean":120.252122352941,"HPmean":120.252122352941,"STOCKN":20},{"Name":"Natural_Gas_Distribution","Mmean":-0.0257240037,"Hmean":-0.0257240037,"MPmean":118.549704705882,"HPmean":118.549704705882,"STOCKN":65},{"Name":"Newspapers/Magazines","Mmean":-0.009164224,"Hmean":-0.009164224,"MPmean":97.4013905882353,"HPmean":97.4013905882353,"STOCKN":14},{"Name":"Office_Equipment/Supplies/Services","Mmean":-0.01429096796,"Hmean":-0.01429096796,"MPmean":124.848989411765,"HPmean":124.848989411765,"STOCKN":15},{"Name":"Oilfield_Services/Equipment","Mmean":-0.043599480621,"Hmean":-0.043599480621,"MPmean":94.0608470588235,"HPmean":94.0608470588235,"STOCKN":24},{"Name":"Oil_&_Gas_Production","Mmean":-0.04906113496,"Hmean":-0.04906113496,"MPmean":103.094482588235,"HPmean":103.094482588235,"STOCKN":194},{"Name":"Oil/Gas_Transmission","Mmean":0.00320536409,"Hmean":0.00320536409,"MPmean":134.661644705882,"HPmean":134.661644705882,"STOCKN":16},{"Name":"Oil_Refining/Marketing","Mmean":-0.03140130132,"Hmean":-0.03140130132,"MPmean":107.199109411765,"HPmean":107.199109411765,"STOCKN":25},{"Name":"Other_Consumer_Services","Mmean":-0.02537555417,"Hmean":-0.02537555417,"MPmean":89.7964505882353,"HPmean":89.7964505882353,"STOCKN":60},{"Name":"Other_Specialty_Stores","Mmean":-0.012956759154,"Hmean":-0.012956759154,"MPmean":111.955424705882,"HPmean":111.955424705882,"STOCKN":43},{"Name":"Packaged_Foods","Mmean":-0.00376212004,"Hmean":-0.00376212004,"MPmean":127.459544705882,"HPmean":127.459544705882,"STOCKN":39},{"Name":"Package_Goods/Cosmetics","Mmean":-0.0025627578,"Hmean":-0.0025627578,"MPmean":126.176930588235,"HPmean":126.176930588235,"STOCKN":17},{"Name":"Paper","Mmean":-0.02633196389,"Hmean":-0.02633196389,"MPmean":101.309843529412,"HPmean":101.309843529412,"STOCKN":13},{"Name":"Plastic_Products","Mmean":-0.01964016438,"Hmean":-0.01964016438,"MPmean":108.964749411765,"HPmean":108.964749411765,"STOCKN":11},{"Name":"Power_Generation","Mmean":0.01361127707,"Hmean":0.01361127707,"MPmean":142.739915294118,"HPmean":142.739915294118,"STOCKN":24},{"Name":"Precious_Metals","Mmean":0.02068342744,"Hmean":0.02068342744,"MPmean":151.737398823529,"HPmean":151.737398823529,"STOCKN":84},{"Name":"Professional_Services","Mmean":-0.02677044549,"Hmean":-0.02677044549,"MPmean":93.6387917647059,"HPmean":93.6387917647059,"STOCKN":41},{"Name":"Property-Casualty_Insurers","Mmean":-0.01161782016,"Hmean":-0.01161782016,"MPmean":106.834972941176,"HPmean":106.834972941176,"STOCKN":97},{"Name":"Publishing","Mmean":-0.0176468132,"Hmean":-0.0176468132,"MPmean":108.772548235294,"HPmean":108.772548235294,"STOCKN":11},{"Name":"Radio_And_Television_Broadcasting_And_Communications_Equipment","Mmean":-0.01285951063,"Hmean":-0.01285951063,"MPmean":112.495215294118,"HPmean":112.495215294118,"STOCKN":35},{"Name":"Railroads","Mmean":-0.0392011689,"Hmean":-0.0392011689,"MPmean":99.4376104705882,"HPmean":99.4376104705882,"STOCKN":16},{"Name":"Real_Estate","Mmean":-0.01878231866,"Hmean":-0.01878231866,"MPmean":106.231218823529,"HPmean":106.231218823529,"STOCKN":50},{"Name":"Real_Estate_Investment_Trusts","Mmean":-0.00301090465,"Hmean":-0.00301090465,"MPmean":126.424021176471,"HPmean":126.424021176471,"STOCKN":229},{"Name":"Recreational_Products/Toys","Mmean":-0.006178063855,"Hmean":-0.006178063855,"MPmean":114.787235294118,"HPmean":114.787235294118,"STOCKN":14},{"Name":"Restaurants","Mmean":-0.0095495644132,"Hmean":-0.0095495644132,"MPmean":106.624292941176,"HPmean":106.624292941176,"STOCKN":64},{"Name":"RETAIL:_Building_Materials","Mmean":-0.013165896767,"Hmean":-0.013165896767,"MPmean":119.968496470588,"HPmean":119.968496470588,"STOCKN":13},{"Name":"Savings_Institutions","Mmean":-0.01176552336,"Hmean":-0.01176552336,"MPmean":99.1229211764706,"HPmean":99.1229211764706,"STOCKN":78},{"Name":"Semiconductors","Mmean":-0.0130087982023,"Hmean":-0.0130087982023,"MPmean":109.161352941176,"HPmean":109.161352941176,"STOCKN":113},{"Name":"Services-Misc._Amusement_&_Recreation","Mmean":-0.00533330891,"Hmean":-0.00533330891,"MPmean":120.377447058824,"HPmean":120.377447058824,"STOCKN":19},{"Name":"Specialty_Chemicals","Mmean":-0.0152984746,"Hmean":-0.0152984746,"MPmean":107.815571764706,"HPmean":107.815571764706,"STOCKN":24},{"Name":"Specialty_Foods","Mmean":-0.00794882043,"Hmean":-0.00794882043,"MPmean":115.399511764706,"HPmean":115.399511764706,"STOCKN":10},{"Name":"Specialty_Insurers","Mmean":-0.0104156616,"Hmean":-0.0104156616,"MPmean":111.546264705882,"HPmean":111.546264705882,"STOCKN":18},{"Name":"Steel/Iron_Ore","Mmean":-0.0109461367,"Hmean":-0.0109461367,"MPmean":137.135234117647,"HPmean":137.135234117647,"STOCKN":32},{"Name":"Telecommunications_Equipment","Mmean":-0.015473496407,"Hmean":-0.015473496407,"MPmean":106.99776,"HPmean":106.99776,"STOCKN":148},{"Name":"Television_Services","Mmean":-0.01584911978,"Hmean":-0.01584911978,"MPmean":107.344122352941,"HPmean":107.344122352941,"STOCKN":36},{"Name":"Transportation_Services","Mmean":-0.02282910663,"Hmean":-0.02282910663,"MPmean":90.7236835294118,"HPmean":90.7236835294118,"STOCKN":15},{"Name":"Trucking_Freight/Courier_Services","Mmean":-0.02371131315,"Hmean":-0.02371131315,"MPmean":109.973096470588,"HPmean":109.973096470588,"STOCKN":18},{"Name":"Water_Supply","Mmean":-0.00065231838,"Hmean":-0.00065231838,"MPmean":129.028907058824,"HPmean":129.028907058824,"STOCKN":20}];


var PERIOD= [{"PERIOD":"Period {2015-11-20} : {2016-04-15}"}];


    // register our custom symbols to nvd3
    // make sure your path is valid given any size because size scales if the chart scales.
    nv.utils.symbolMap.set('thin-x', function(size) {
        size = Math.sqrt(size);
        return 'M' + (-size/2) + ',' + (-size/2) +'l' + size + ',' + size +'m0,' + -(size) +'l' + (-size) + ',' + size;
    });

    // create the chart
    var chart;
    nv.addGraph(function() {
        chart = nv.models.scatterChart()
            .showDistX(true)
            .showDistY(true)
            .useVoronoi(true)
            .color(d3.scale.category10().range())
            .duration(300)
            .showLegend(false)
        ;

        chart.yAxis
    .axisLabel('Performance');
    chart.xAxis
    .axisLabel('Arth_Mean');
    
       chart.dispatch.on('renderEnd', function(){
           console.log('render complete');
        });

        chart.xAxis.tickFormat(d3.format('.02f'));
        chart.yAxis.tickFormat(d3.format('.02f'));
       chart.tooltipContent(function(key) {
       // return '<h2>' + key + '</h2>';
       return key;
       });

        d3.select('#test1 svg')
            .datum(randomData(datax.length))
            .call(chart);

        nv.utils.windowResize(chart.update);

        chart.dispatch.on('stateChange', function(e) { ('New State:', JSON.stringify(e)); });
        return chart;
    });

    function randomData(points) { //# groups,# points per group
        // smiley and thin-x are our custom symbols!
        var data = [];
        var shapes = ['square'];
        var     random = d3.random.normal();

        for (i = 0; i < points; i++) {
            data.push({ key:'<h2>' +  datax[i].Name + '</h2>' + '<p><small> ' + ' # of Stocks ' + datax[i].STOCKN+ ' </small> </p>'+ '<p><small>' + PERIOD[0].PERIOD + ' </small> </p>',values: []});
            data[i].values.push({x: datax[i].Mmean,y: datax[i].HPmean,size: Math.round(datax[i].MPmean * 100) / 100,shape: shapes[0 % shapes.length]});
        }

        return data;
    }


</script>
</body>
</html>
